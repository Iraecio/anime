<!-- VERS√ÉO COM ANIME-ROW PARA SUBSTITUIR O GRID ATUAL -->
<!-- Esta √© uma vers√£o alternativa do template home.html usando anime-row -->

<!-- Header Navigation (mant√©m igual) -->
<header class="header-navbar bg-dark border-bottom border-secondary position-sticky top-0" style="z-index: 1000;">
  <div class="container-fluid">
    <div class="row align-items-center py-3">
      <!-- Logo/Brand -->
      <div class="col-auto">
        <h1 class="h3 mb-0 text-white fw-bold">
          <!-- Logo completo para telas grandes (md e acima) -->
          <span class="d-none d-md-inline">
            <span class="text-danger">Animes</span> BR
          </span>
          <!-- Logo compacto para telas pequenas (sm e abaixo) -->
          <span class="d-inline d-md-none">
            <span class="text-danger">A</span>BR
          </span>
        </h1>
      </div>

      <!-- Search Bar (centered) -->
      <div class="col">
        <div class="d-flex justify-content-center">
          <div class="search-wrapper" style="width: 100%;">
            <app-search [config]="searchConfig" [isSearching]="isSearching()" [initialQuery]="searchQuery()"
              (onSearch)="handleSearch($event)" (onClear)="handleSearchClear()"></app-search>
          </div>
        </div>
      </div>
    </div>

    <!-- Cache Debug Component (only in development) -->
    @if (showCacheDebug()) {
    <div class="row">
      <div class="col-12">
        <app-cache-debug></app-cache-debug>
      </div>
    </div>
    }
  </div>
</header>

<div class="container-fluid bg-dark text-white min-vh-100 py-4" style="padding-top: 2rem !important;">

  @if (showDataLoading()) {
  <!-- Loading State -->
  <div class="d-flex flex-column align-items-center justify-content-center py-5">
    <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
    <p class="h5 text-muted">{{ isInSearchMode() ? 'Buscando' : 'Carregando' }} animes...</p>
  </div>
  } @else if (animes().length === 0 && isInSearchMode()) {
  <!-- Empty Search State -->
  <div class="text-center py-5">
    <div class="display-1 mb-4">üîç</div>
    <h3 class="h2 mb-3">Nenhum anime encontrado</h3>
    <p class="lead text-muted mb-4">N√£o encontramos animes com o termo "<span class="text-info">{{ searchQuery() }}</span>"</p>
    <button class="btn btn-primary btn-lg" (click)="handleSearchClear()">
      ‚Üê Ver todos os animes
    </button>
  </div>
  } @else if (isInSearchMode()) {
  <!-- Search Results - Grid View -->
  <div class="mb-4">
    <h2 class="h4 mb-3">Resultados da busca para "<span class="text-info">{{ searchQuery() }}</span>"</h2>
    <div class="row">
      @for (anime of animes(); track anime.id; let i = $index) {
      <div class="col-6 col-sm-4 col-md-3 col-lg-2 col-xl-2 mb-4">
        <app-card-anime [anime]="anime" [index]="i" (onCardClick)="handleAnimeCardClick($event)"
          (onEpisodeClick)="handleEpisodeClick($event)"
          (onAdultContentToggle)="handleAdultContentToggle($event)"></app-card-anime>
      </div>
      }
    </div>
  </div>
  } @else {
  <!-- Netflix-style Row Layout -->
  
  <!-- Se√ß√£o Hero/Destaque (primeiro anime como banner) -->
  @if (animes().length > 0) {
  <div class="hero-section mb-5">
    <div class="hero-content">
      <h1 class="display-4 mb-3">{{ animes()[0].titulo }}</h1>
      <p class="lead mb-4">{{ animes()[0].sinopse }}</p>
      <div class="hero-actions">
        <button class="btn btn-primary btn-lg me-3" (click)="handleAnimeCardClick({anime: animes()[0], index: 0})">
          ‚ñ∂ Assistir
        </button>
        <button class="btn btn-outline-light btn-lg">
          ‚Ñπ Mais Informa√ß√µes
        </button>
      </div>
    </div>
  </div>
  }

  <!-- Animes Rec√©m Adicionados -->
  @if (recentAnimes().length > 0) {
  <app-anime-row
    title="Rec√©m Adicionados"
    [animes]="recentAnimes()"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }

  <!-- Animes de A√ß√£o -->
  @if (actionAnimes().length > 0) {
  <app-anime-row
    title="Animes de A√ß√£o"
    [animes]="actionAnimes()"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }

  <!-- Animes de Romance -->
  @if (romanceAnimes().length > 0) {
  <app-anime-row
    title="Romance"
    [animes]="romanceAnimes()"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }

  <!-- S√©ries Completas -->
  @if (completedAnimes().length > 0) {
  <app-anime-row
    title="S√©ries Completas"
    [animes]="completedAnimes()"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }

  <!-- Animes em Andamento -->
  @if (ongoingAnimes().length > 0) {
  <app-anime-row
    title="Em Andamento"
    [animes]="ongoingAnimes()"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }

  <!-- Row com todos os animes restantes -->
  @if (animes().length > 12) {
  <app-anime-row
    title="Explorar Mais"
    [animes]="animes().slice(12)"
    [showTitle]="true"
    (onAnimeClick)="handleAnimeCardClick($event)"
    (onEpisodeClick)="handleEpisodeClick($event)"
    (onAdultContentToggle)="handleAdultContentToggle($event)">
  </app-anime-row>
  }
  }

  <!-- Pagina√ß√£o (mant√©m apenas para modo de busca ou se necess√°rio) -->
  @if (isInSearchMode() && animes().length > 0) {
  <div class="d-flex flex-column align-items-center gap-3 mt-5">
    <app-paginacao [totalItems]="totalAnimes()" [itemsPerPage]="perPage()" [currentPage]="currentPage()"
      (onPageChange)="handlePageChange($event)"></app-paginacao>
  </div>
  }
</div>

<!-- CSS adicional para a se√ß√£o hero -->
<style>
.hero-section {
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.8),
    rgba(0, 0, 0, 0.4)
  ),
  url('{{ animes()[0]?.imagem || "" }}') center/cover;
  min-height: 400px;
  display: flex;
  align-items: center;
  padding: 2rem;
  border-radius: 8px;
  margin: 0 -15px;
}

.hero-content {
  max-width: 50%;
}

.hero-actions .btn {
  min-width: 120px;
}

@media (max-width: 768px) {
  .hero-content {
    max-width: 100%;
  }
  
  .hero-section {
    min-height: 300px;
    padding: 1rem;
  }
}
</style>